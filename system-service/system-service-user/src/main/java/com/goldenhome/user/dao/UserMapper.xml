<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goldenhome.user.dao.UserMapper">


    <update id="update" parameterType="com.goldenhome.user.pojo.User">
    update  t_user
    set
    loginTime = #{loginTime},
    status = #{status}
    where
    id = #{id}
    </update>

    <select id="selectByUsername"  resultType="com.goldenhome.user.pojo.User">
    SELECT  id,username,password,phone,loginTime,status,lastLoginTime
    FROM  t_user
    t_accesscode
    where
    username = #{username}
    and
    password = #{password}
    and
    accessCode = #{accessCode}
    and
    codeStatus = 1
    </select>

    <update id="logout" >
    update  t_user
    set
    status = #{status},
    lastloginTime = #{lastloginTime}
    where
    id = #{id}
    </update>

    <insert id="insertAccessCode"  >
    insert into t_accesscode (accessCode,codeStatus,userId)
    values (#{accessCode},#{codeStatus},#{id})
</insert>

</mapper>

